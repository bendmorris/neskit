import neskit.nes;
import neskit.opcode;
import neskit.rom;

function main(argc: Int, argv: CArray[CString]) {
    // OpCode.decodeBytes();
    if argc < 2 {
        printf("usage: %s ROM.nes\n", argv[0]);
        exit(1);
    }

    // read rom
    var rom: Rom;
    var nes = Nes.new(rom);
    nes.init();
    nes.loadRom(argv[1]);

    nes.runFrame();
}
